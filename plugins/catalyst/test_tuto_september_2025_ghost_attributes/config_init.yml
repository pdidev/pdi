# the alpha parameter
alpha: 0.125
# global data-size (excluding the number of ghost layers for boundary conditions)
global_size: { height: 60, width: 12 }
# degree of parallelism (number of blocks in each dimension)
parallelism: { height: 2, width: 2 }

pdi:
  metadata:
    local_size: {type: array, subtype: int, size: 2}
    rank: int
    pcoord: {type: array, subtype: int, size: 2}
    psize: {type: array, subtype: int, size: 2}
    max_iter: int
  data:
    iteration: int
    temp: {type: array, subtype: double, size: ['$local_size[0]', '$local_size[1]']}
    total_number_of_points: size_t
    cycle: int
    time: double
    ghosts: {  type: array, subtype: uint8_t, size: '$local_size[0]*$local_size[1]' }
    coords_x:  {  type: array, subtype: double, size: '($local_size[0]+1)*($local_size[1]+1)' }
    coords_y:  {  type: array, subtype: double, size: '($local_size[0]+1)*($local_size[1]+1)' }
  plugins:
    trace: 
    mpi:
    catalyst:
      scripts:
        script1: "@CATALYST_SCRIPT_FOLDER@/catalyst_pipeline_with_rendering.py"
      PDI_execute_event_name: "catalyst_execute"
      execute:
        state:
          timestep: '$cycle'
          time: '$time'
          multiblock: 1
        channels:
          grid:
            type: "mesh"
            data:
              coordsets:
                my_coords:
                  type: "explicit"
                  values:
                    x:
                      PDI_data_array: "coords_x"
                      size: '($local_size[0]+1)*($local_size[1]+1)'
                    y:
                      PDI_data_array: "coords_y"
                      size: '($local_size[0]+1)*($local_size[1]+1)'
              topologies:
                my_mesh:
                  type: "structured"
                  coordset: "my_coords"
                  elements:
                    dims:
                      i: '$local_size[1]'
                      j: '$local_size[0]'
              fields:
                temperature:
                  association: "element"
                  topology: "my_mesh"
                  volume_dependent: "false"
                  values:
                    PDI_data_array: "temp"
                    size: '$local_size[0]*$local_size[1]'
                vtkGhostType:
                  association: "element"
                  topology: "my_mesh"
                  volume_dependent: "false"
                  values:
                    PDI_data_array: "ghosts"
                    size: '$local_size[0]*$local_size[1]'