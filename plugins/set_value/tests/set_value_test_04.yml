# SPDX-FileCopyrightText: 2020-2021 Institute of Bioorganic Chemistry Polish Academy of Science (PSNC)
# SPDX-FileCopyrightText: 2026 Commissariat a l'energie atomique et aux energies alternatives (CEA)
#
# SPDX-License-Identifier: BSD-3-Clause

logging:
  level: trace
metadata:
  array_metadata:
    type: array
    size: $array_size
    subtype: int
data:
  array_size: int

plugins:
  set_value:
    on_init:
      - share:
        - array_size: 0
      - set:
        - array_size: 4
      - expose:
        - array_metadata: [1, 2, 3, 4]
      - set:
        - array_size: 6
    on_event:
      update_array:
        - expose:
          - array_metadata: [9, 8, 7, 6, 5, 4]
        - set:
          - array_size: 0
    on_finalize:
      - release: [array_size]
